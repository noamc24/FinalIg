<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Statistics</title>
  <link rel="stylesheet" href="../css/Feed.css" />
  <style>
    :root { --card-bg:#fff; --card-ink:#111; --card-border:#e6e6e6; --muted:#6b7280; --grid:#e9ecef; --brand:#4e79a7; --accent:#e15759; --accent-2:#76b7b2; }
    .dark-mode { --card-bg:#151515; --card-ink:#f4f4f4; --card-border:#2b2b2b; --muted:#a1a1a1; --grid:#2a2a2a; }
    body { font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif; }
    .title { text-align:center; margin:24px 0 8px; }
    .stats-page { max-width:1100px; margin:0 auto 40px; padding:0 16px; }
    .controls { display:flex; gap:12px; justify-content:center; align-items:center; margin:14px 0; color:var(--card-ink); flex-wrap:wrap; }
    .controls select, .controls button { border:1px solid var(--card-border); background:var(--card-bg); color:var(--card-ink); border-radius:8px; padding:6px 10px; }
    .controls .live-toggle{ display:flex; align-items:center; gap:6px; color:var(--muted); font-size:13px; }
    .card { background:var(--card-bg); color:var(--card-ink); border:1px solid var(--card-border); border-radius:14px; padding:14px 16px 6px; box-shadow:0 6px 20px rgba(0,0,0,.06); margin:16px auto; max-width:1000px; }
    .card h3{ margin:0 0 8px; font-size:18px; font-weight:700; color:var(--card-ink); text-align:center; }
    .chart{ width:100%; }
    .tooltip{ position:absolute; pointer-events:none; background:#111; color:#fff; padding:8px 10px; border-radius:6px; font-size:12px; opacity:0; transform:translate(-50%,-120%); box-shadow:0 4px 16px rgba(0,0,0,.2); }
    .legend { display:flex; gap:16px; justify-content:center; align-items:center; margin-top:6px; color:var(--muted); font-size:12px; }
    .legend .sw { width:10px; height:10px; border-radius:2px; display:inline-block; margin-inline-end:6px; }
    .axis text{ fill:var(--muted); font-size:12px; }
    .back-btn{ text-decoration:none; border:1px solid var(--card-border); background:var(--card-bg); color:var(--card-ink); padding:8px 14px; border-radius:10px; display:inline-flex; align-items:center; gap:8px; box-shadow:0 3px 10px rgba(0,0,0,.05); transition: transform .06s ease, background .2s ease; }
    .back-btn:hover{ transform: translateY(-1px); background: rgba(0,0,0,.02); }
    .back-floating{ position: fixed; top:14px; left:18px; z-index:1000; }
  </style>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <script>try{ if(localStorage.getItem('theme')==='dark') document.body.classList.add('dark-mode'); }catch{}</script>
  <a href="feed.html" class="back-btn back-floating"><span style="font-size:18px;">‚Üê</span><span>Back to Feed</span></a>
  <div class="stats-page">
    <h1 class="title">Statistics</h1>
    <div class="controls">
      <label>Days:
        <select id="daysSelect">
          <option value="7">7</option>
          <option value="14" selected>14</option>
          <option value="30">30</option>
          <option value="90">90</option>
        </select>
      </label>
      <button id="refreshBtn" type="button">Refresh</button>
      <label class="live-toggle"><input type="checkbox" id="liveToggle" checked> Live update (every 10s)</label>
    </div>
    <div class="card"><h3>Posts per Day</h3><div id="perDay" class="chart"></div></div>
    <div class="card"><h3>Posts by Media Type</h3><div id="byType" class="chart"></div><div id="byTypeLegend" class="legend"></div></div>
    <div class="card"><h3>Average Likes per Post per Day</h3><div id="avgLikes" class="chart"></div></div>
  </div>
  <div id="tooltip" class="tooltip"></div>
  <script src="../js/stats.js"></script>
</body>
</html>

